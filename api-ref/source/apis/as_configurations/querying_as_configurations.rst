:original_name: as_06_0202.html

.. _as_06_0202:

Querying AS configurations
==========================

Function
--------

This API is used to query AS configurations based on search criteria. The results are displayed by page.

-  Search criteria can be the AS configuration name, image ID, start line number, and number of records.
-  If no search criteria are specified, a maximum of 20 AS configurations can be queried for a tenant by default.

URI
---

GET /autoscaling-api/v1/{project_id}/scaling_configuration

.. note::

   You can type the question mark (?) and ampersand (&) at the end of the URI to define multiple search criteria. AS configurations can be searched by all optional parameters in the following table. For details, see the example request.

.. table:: **Table 1** Parameter description

   +----------------------------+-----------------+-----------------+----------------------------------------------------------------------------------------------------+
   | Parameter                  | Mandatory       | Type            | Description                                                                                        |
   +============================+=================+=================+====================================================================================================+
   | project_id                 | Yes             | String          | Specifies the project ID.                                                                          |
   +----------------------------+-----------------+-----------------+----------------------------------------------------------------------------------------------------+
   | scaling_configuration_name | No              | String          | Specifies the AS configuration name.                                                               |
   |                            |                 |                 |                                                                                                    |
   |                            |                 |                 | Supports fuzzy search.                                                                             |
   +----------------------------+-----------------+-----------------+----------------------------------------------------------------------------------------------------+
   | image_id                   | No              | String          | Specifies the image ID. It is same as **imageRef**.                                                |
   +----------------------------+-----------------+-----------------+----------------------------------------------------------------------------------------------------+
   | start_number               | No              | Integer         | Specifies the start line number. The default value is **0**. The minimum parameter value is **0**. |
   +----------------------------+-----------------+-----------------+----------------------------------------------------------------------------------------------------+
   | limit                      | No              | Integer         | Specifies the number of query records. The default value is **20**. The value range is 0 to 100.   |
   +----------------------------+-----------------+-----------------+----------------------------------------------------------------------------------------------------+

Request Message
---------------

-  Request parameters

   None

-  Example request

   This example shows how to query the AS configurations with image ID **37ca2b35-6fc7-47ab-93c7-900324809c5c**.

   .. code-block:: text

      GET https://{Endpoint}/autoscaling-api/v1/{project_id}/scaling_configuration?image_id=37ca2b35-6fc7-47ab-93c7-900324809c5c

Response Message
----------------

-  Response parameters

   .. table:: **Table 2** Response parameters

      +------------------------+---------------------------------------------------------------------------------+----------------------------------------------+
      | Parameter              | Type                                                                            | Description                                  |
      +========================+=================================================================================+==============================================+
      | total_number           | Integer                                                                         | Specifies the total number of query records. |
      +------------------------+---------------------------------------------------------------------------------+----------------------------------------------+
      | start_number           | Integer                                                                         | Specifies the start line number.             |
      +------------------------+---------------------------------------------------------------------------------+----------------------------------------------+
      | limit                  | Integer                                                                         | Specifies the number of query records.       |
      +------------------------+---------------------------------------------------------------------------------+----------------------------------------------+
      | scaling_configurations | Array of :ref:`scaling_configurations <as_06_0202__table5681858093547>` objects | Specifies the AS configuration list.         |
      +------------------------+---------------------------------------------------------------------------------+----------------------------------------------+

   .. _as_06_0202__table5681858093547:

   .. table:: **Table 3** **scaling_configurations** field description

      +----------------------------+---------------------------------------------------------------+-------------------------------------------------------------------------------------------+
      | Parameter                  | Type                                                          | Description                                                                               |
      +============================+===============================================================+===========================================================================================+
      | scaling_configuration_id   | String                                                        | Specifies the AS configuration ID. This parameter is globally unique.                     |
      +----------------------------+---------------------------------------------------------------+-------------------------------------------------------------------------------------------+
      | tenant                     | String                                                        | Specifies the tenant ID.                                                                  |
      +----------------------------+---------------------------------------------------------------+-------------------------------------------------------------------------------------------+
      | scaling_configuration_name | String                                                        | Specifies the AS configuration name.                                                      |
      |                            |                                                               |                                                                                           |
      |                            |                                                               | Supports fuzzy search.                                                                    |
      +----------------------------+---------------------------------------------------------------+-------------------------------------------------------------------------------------------+
      | instance_config            | :ref:`instance_config <as_06_0202__table420823093759>` object | Specifies the information about instance configurations.                                  |
      +----------------------------+---------------------------------------------------------------+-------------------------------------------------------------------------------------------+
      | create_time                | String                                                        | Specifies the time when AS configurations are created. The time format complies with UTC. |
      +----------------------------+---------------------------------------------------------------+-------------------------------------------------------------------------------------------+
      | scaling_group_id           | String                                                        | Specifies the ID of the AS group to which the AS configuration is bound.                  |
      +----------------------------+---------------------------------------------------------------+-------------------------------------------------------------------------------------------+

   .. _as_06_0202__table420823093759:

   .. table:: **Table 4** **instance_config** field description

      +------------------------------+-------------------------------------------------------------------------+------------------------------------------------------------------------------------------------+
      | Parameter                    | Type                                                                    | Description                                                                                    |
      +==============================+=========================================================================+================================================================================================+
      | flavorRef                    | String                                                                  | Specifies the ECS flavor ID.                                                                   |
      +------------------------------+-------------------------------------------------------------------------+------------------------------------------------------------------------------------------------+
      | imageRef                     | String                                                                  | Specifies the image ID. It is same as **image_id**.                                            |
      +------------------------------+-------------------------------------------------------------------------+------------------------------------------------------------------------------------------------+
      | disk                         | Array of :ref:`disk <as_06_0202__table2679008093849>` objects           | Specifies the disk group information.                                                          |
      +------------------------------+-------------------------------------------------------------------------+------------------------------------------------------------------------------------------------+
      | key_name                     | String                                                                  | Specifies the name of the SSH key pair used to log in to the ECS.                              |
      +------------------------------+-------------------------------------------------------------------------+------------------------------------------------------------------------------------------------+
      | key_fingerprint              | String                                                                  | Specifies the fingerprint of the SSH key pair used to log in to the ECS.                       |
      +------------------------------+-------------------------------------------------------------------------+------------------------------------------------------------------------------------------------+
      | instance_name                | String                                                                  | This parameter is reserved.                                                                    |
      +------------------------------+-------------------------------------------------------------------------+------------------------------------------------------------------------------------------------+
      | instance_id                  | String                                                                  | This parameter is reserved.                                                                    |
      +------------------------------+-------------------------------------------------------------------------+------------------------------------------------------------------------------------------------+
      | adminPass                    | String                                                                  | This parameter is reserved.                                                                    |
      +------------------------------+-------------------------------------------------------------------------+------------------------------------------------------------------------------------------------+
      | personality                  | Array of :ref:`personality <as_06_0202__table1186638793926>` objects    | Specifies information about the injected file.                                                 |
      +------------------------------+-------------------------------------------------------------------------+------------------------------------------------------------------------------------------------+
      | public_ip                    | :ref:`public_ip <as_06_0202__tcdec56e5b04447d7b37ba3897d12796c>` object | Specifies the EIP of the ECS.                                                                  |
      +------------------------------+-------------------------------------------------------------------------+------------------------------------------------------------------------------------------------+
      | user_data                    | String                                                                  | Specifies the Cloud-Init user data, which is encoded using Base64.                             |
      +------------------------------+-------------------------------------------------------------------------+------------------------------------------------------------------------------------------------+
      | metadata                     | :ref:`metadata <as_06_0202__table6119722495435>` object                 | Specifies the ECS metadata. For details, see :ref:`Table 11 <as_06_0202__table6119722495435>`. |
      +------------------------------+-------------------------------------------------------------------------+------------------------------------------------------------------------------------------------+
      | security_groups              | Array of :ref:`security_groups <as_06_0202__table121274211250>` objects | Specifies the security group information.                                                      |
      +------------------------------+-------------------------------------------------------------------------+------------------------------------------------------------------------------------------------+
      | server_group_id              | String                                                                  | This parameter is reserved.                                                                    |
      +------------------------------+-------------------------------------------------------------------------+------------------------------------------------------------------------------------------------+
      | tenancy                      | String                                                                  | This parameter is reserved.                                                                    |
      +------------------------------+-------------------------------------------------------------------------+------------------------------------------------------------------------------------------------+
      | dedicated_host_id            | String                                                                  | This parameter is reserved.                                                                    |
      +------------------------------+-------------------------------------------------------------------------+------------------------------------------------------------------------------------------------+
      | market_type                  | String                                                                  | This parameter is reserved.                                                                    |
      +------------------------------+-------------------------------------------------------------------------+------------------------------------------------------------------------------------------------+
      | multi_flavor_priority_policy | String                                                                  | This parameter is reserved.                                                                    |
      +------------------------------+-------------------------------------------------------------------------+------------------------------------------------------------------------------------------------+

   .. _as_06_0202__table2679008093849:

   .. table:: **Table 5** **disk** field description

      +----------------------+----------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------+
      | Parameter            | Type                                                     | Description                                                                                                                  |
      +======================+==========================================================+==============================================================================================================================+
      | size                 | Integer                                                  | Specifies the disk size. The unit is GB.                                                                                     |
      +----------------------+----------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------+
      | volume_type          | String                                                   | Specifies the disk type.                                                                                                     |
      +----------------------+----------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------+
      | disk_type            | String                                                   | Specifies whether the disk is a system disk or a data disk. **DATA** indicates a data disk. **SYS** indicates a system disk. |
      +----------------------+----------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------+
      | dedicated_storage_id | String                                                   | Specifies the ID of the DSS device for the disk.                                                                             |
      +----------------------+----------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------+
      | data_disk_image_id   | String                                                   | Specifies the ID of the data disk image for creating a data disk.                                                            |
      +----------------------+----------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------+
      | snapshot_id          | String                                                   | Specifies the disk backup snapshot ID.                                                                                       |
      +----------------------+----------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------+
      | metadata             | :ref:`metadata <as_06_0202__table17912164981110>` object | Specifies the metadata for creating disks. For details, see :ref:`Table 6 <as_06_0202__table17912164981110>`.                |
      +----------------------+----------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------+

   .. _as_06_0202__table17912164981110:

   .. table:: **Table 6** **metadata** Field Description for Creating Disks

      +-----------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------+
      | Parameter             | Type                  | Description                                                                                                               |
      +=======================+=======================+===========================================================================================================================+
      | \__system__encrypted  | String                | Specifies encryption in **metadata**. The value can be **0** (encryption disabled) or **1** (encryption enabled).         |
      |                       |                       |                                                                                                                           |
      |                       |                       | If this parameter does not exist, the disk will not be encrypted by default.                                              |
      +-----------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------+
      | \__system__cmkid      | String                | Specifies the CMK ID, which indicates encryption in **metadata**. This parameter is used with **\__system__encrypted**.   |
      |                       |                       |                                                                                                                           |
      |                       |                       | .. note::                                                                                                                 |
      |                       |                       |                                                                                                                           |
      |                       |                       |    For details about how to obtain the CMK ID, see "Querying the List of CMKs" in *Key Management Service API Reference*. |
      +-----------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------+

   .. _as_06_0202__table1186638793926:

   .. table:: **Table 7** **personality** field description

      +-----------+--------+---------------------------------------------------------------------------------------------+
      | Parameter | Type   | Description                                                                                 |
      +===========+========+=============================================================================================+
      | path      | String | Specifies the path of the injected file.                                                    |
      +-----------+--------+---------------------------------------------------------------------------------------------+
      | content   | String | Specifies the content of the file to be injected. The file content is encoded using Base64. |
      +-----------+--------+---------------------------------------------------------------------------------------------+

   .. _as_06_0202__tcdec56e5b04447d7b37ba3897d12796c:

   .. table:: **Table 8** **public_ip** field description

      +-----------+-------------------------------------------------------------------+-------------------------------------------+
      | Parameter | Type                                                              | Description                               |
      +===========+===================================================================+===========================================+
      | eip       | :ref:`eip <as_06_0202__tdd0bc92fd16345d48c819c97641a369f>` object | Specifies the automatically assigned EIP. |
      +-----------+-------------------------------------------------------------------+-------------------------------------------+

   .. _as_06_0202__tdd0bc92fd16345d48c819c97641a369f:

   .. table:: **Table 9** **eip** field description

      +-----------+-------------------------------------------------------------------------+-------------------------------------------+
      | Parameter | Type                                                                    | Description                               |
      +===========+=========================================================================+===========================================+
      | ip_type   | String                                                                  | Specifies the IP address type.            |
      +-----------+-------------------------------------------------------------------------+-------------------------------------------+
      | bandwidth | :ref:`bandwidth <as_06_0202__t5334015bf90941a996bc1c9ca7ef4637>` object | Specifies the bandwidth of an IP address. |
      +-----------+-------------------------------------------------------------------------+-------------------------------------------+

   .. _as_06_0202__t5334015bf90941a996bc1c9ca7ef4637:

   .. table:: **Table 10** **bandwidth** field description

      +-----------------------+-----------------------+----------------------------------------+
      | Parameter             | Type                  | Description                            |
      +=======================+=======================+========================================+
      | size                  | Integer               | Specifies the bandwidth (Mbit/s).      |
      +-----------------------+-----------------------+----------------------------------------+
      | share_type            | String                | Specifies the bandwidth sharing type.  |
      |                       |                       |                                        |
      |                       |                       | Enumerated values of the sharing type: |
      |                       |                       |                                        |
      |                       |                       | -  **PER**: dedicated                  |
      +-----------------------+-----------------------+----------------------------------------+
      | charging_mode         | String                | Specifies the bandwidth billing mode.  |
      |                       |                       |                                        |
      |                       |                       | -  **traffic**: billed by traffic.     |
      +-----------------------+-----------------------+----------------------------------------+

   .. _as_06_0202__table6119722495435:

   .. table:: **Table 11** **metadata** field description

      +------------+--------+----------------------------------------------------------------------------+
      | Parameter  | Type   | Description                                                                |
      +============+========+============================================================================+
      | admin_pass | String | Specifies the password of the **Administrator** account for a Windows ECS. |
      +------------+--------+----------------------------------------------------------------------------+

   .. _as_06_0202__table121274211250:

   .. table:: **Table 12** **security_groups** field description

      ========= ====== ================================
      Parameter Type   Description
      ========= ====== ================================
      id        String Specifies the security group ID.
      ========= ====== ================================

-  Example response

   .. code-block::

      {
          "limit": 20,
          "total_number": 2,
          "start_number": 0,
          "scaling_configurations": [
              {
                  "tenant": "ce061903a53545dcaddb300093b477d2",
                  "scaling_configuration_id": "6afe46f9-7d3d-4046-8748-3b2a1085ad86",
                  "scaling_configuration_name": " config_name_1",
                  "instance_config": {
                      "disk": [
                          {
                              "size": 40,
                              "volume_type": "SATA",
                              "disk_type": "SYS"
                          },
                          {
                              "size": 100,
                              "volume_type": "SATA",
                              "disk_type": "DATA"
                          }
                      ],
                      "personality": null,
                      "instance_name": null,
                      "instance_id": null,
                      "flavorRef": "103",
                      "imageRef": "37ca2b35-6fc7-47ab-93c7-900324809c5c",
                      "key_name": "keypair01",
                      "public_ip": null,
                      "user_data": null,
                      "metadate": {},
                      "security_groups": [{
                           "id": "6c22a6c0-b5d2-4a84-ac56-51090dcc33be"
                      }],
                  },
                  "create_time": "2015-07-23T01:04:07Z"
              },
              {
                  "tenant": "ce061903a53545dcaddb300093b477d2",
                  "scaling_configuration_id": "24a8c5f3-c713-4aba-ac29-c17101009e5d",
                  "scaling_configuration_name": "config_name_2",
                  "instance_config": {
                      "disk": [
                          {
                              "size": 40,
                              "volume_type": "SATA",
                              "disk_type": "SYS"
                          }
                      ],
                      "personality": null,
                      "instance_name": null,
                      "instance_id": null,
                      "flavorRef": "103",
                      "imageRef": "37ca2b35-6fc7-47ab-93c7-900324809c5c",
                      "key_name": "keypair01",
                      "public_ip": null,
                      "user_data": null,
                      "metadata": {},
                      "security_groups": [{
                           "id": "6c22a6c0-b5d2-4a84-ac56-51090dcc33be"
                      }],
                      "multi_flavor_priority_policy": "PICK_FIRST"
                  },
                  "create_time": "2015-07-22T01:08:41Z"
              }
          ]
      }

Returned Values
---------------

-  Normal

   200

-  Abnormal

   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | Returned Value                    | Description                                                                                |
   +===================================+============================================================================================+
   | 400 Bad Request                   | The server failed to process the request.                                                  |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 401 Unauthorized                  | You must enter the username and password to access the requested page.                     |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 403 Forbidden                     | You are forbidden to access the requested page.                                            |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 404 Not Found                     | The server could not find the requested page.                                              |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 405 Method Not Allowed            | You are not allowed to use the method specified in the request.                            |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 406 Not Acceptable                | The response generated by the server could not be accepted by the client.                  |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 407 Proxy Authentication Required | You must use the proxy server for authentication so that the request can be processed.     |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 408 Request Timeout               | The request timed out.                                                                     |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 409 Conflict                      | The request could not be processed due to a conflict.                                      |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 500 Internal Server Error         | Failed to complete the request because of an internal service error.                       |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 501 Not Implemented               | Failed to complete the request because the server does not support the requested function. |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 502 Bad Gateway                   | Failed to complete the request because the request is invalid.                             |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 503 Service Unavailable           | Failed to complete the request because the system is unavailable.                          |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 504 Gateway Timeout               | A gateway timeout error occurred.                                                          |
   +-----------------------------------+--------------------------------------------------------------------------------------------+

Error Codes
-----------

See :ref:`Error Codes <as_07_0102>`.

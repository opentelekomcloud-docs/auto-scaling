:original_name: as_03_0102.html

.. _as_03_0102:

Creating an AS Policy
=====================

Scenarios
---------

You can manage instances in an AS group through AS policies. This section describes how to create an AS policy.

Creating an Alarm Policy
------------------------

#. Log in to the management console.

#. Click |image1| in the upper left corner to select a region and a project.

#. Under **Computing**, click **Auto Scaling**. In the navigation pane on the left, choose **Instance Scaling**.

#. Locate the row containing the target AS group and click **View AS Policy** in the **Operation** column.

#. On the **AS Policies** page, click **Add AS Policy**.

#. Set the parameters listed in :ref:`Table 1 <as_03_0102__table442371481205>`.

   .. _as_03_0102__table442371481205:

   .. table:: **Table 1** AS policy parameters

      +-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter             | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Example Value                                                                                                                                                                                                                           |
      +=======================+=======================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+=========================================================================================================================================================================================================================================+
      | Policy Name           | Specifies the name of the AS policy to be created.                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | as-policy-p6g5                                                                                                                                                                                                                          |
      +-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Policy Type           | Select **Alarm**.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | Alarm Policy                                                                                                                                                                                                                            |
      +-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Alarm Rule            | Specifies whether a new alarm rule is to be created (**Create**) or an existing alarm rule will be used (**Use existing**).                                                                                                                                                                                                                                                                                                                                                                                           | N/A                                                                                                                                                                                                                                     |
      |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                         |
      |                       | To create an alarm rule, configure the following parameters:                                                                                                                                                                                                                                                                                                                                                                                                                                                          |                                                                                                                                                                                                                                         |
      |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                         |
      |                       | -  Rule Name                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |                                                                                                                                                                                                                                         |
      |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                         |
      |                       |    Specifies the name of the new alarm rule, for example, **as-alarm-7o1u**.                                                                                                                                                                                                                                                                                                                                                                                                                                          |                                                                                                                                                                                                                                         |
      |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                         |
      |                       | -  Trigger Condition                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                                                                                                                                                                                                         |
      |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                         |
      |                       |    Specifies a monitoring metric and condition for triggering a scaling action. For example, when CPU Usage becomes higher than 70%, AS automatically triggers a scaling action.                                                                                                                                                                                                                                                                                                                                      |                                                                                                                                                                                                                                         |
      |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                         |
      |                       | -  Monitoring Interval                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |                                                                                                                                                                                                                                         |
      |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                         |
      |                       |    Specifies the interval (such as five minutes) at which the alarm status is updated based on the alarm rule.                                                                                                                                                                                                                                                                                                                                                                                                        |                                                                                                                                                                                                                                         |
      |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                         |
      |                       | -  Consecutive Occurrences                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                         |
      |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                         |
      |                       |    Specifies the number of sampling points when an alarm is triggered. If **Occurrences** is set to **n**, the sampling points of the alarm rule are the sampling points in n consecutive sampling periods. Only if all the sampling points meet the threshold configured for the alarm rule will the alarm rule status be refreshed as the **Alarm** status.                                                                                                                                                         |                                                                                                                                                                                                                                         |
      +-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Scaling Action        | Specifies an action and the number or percentage of instances.                                                                                                                                                                                                                                                                                                                                                                                                                                                        | -  Add 1 instance                                                                                                                                                                                                                       |
      |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                         |
      |                       | The following scaling action options are available:                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | -  Add 10% instances                                                                                                                                                                                                                    |
      |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                         |
      |                       | -  Add                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |    The number of instances to be added is 10% of the current number of instances in the AS group. If the product of the current number of instances and the percentage is not an integer, AS automatically rounds the value up or down: |
      |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                         |
      |                       |    Adds instances to an AS group when the scaling action is performed.                                                                                                                                                                                                                                                                                                                                                                                                                                                |    -  If the value is greater than 1, it is rounded down.                                                                                                                                                                               |
      |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                         |
      |                       | -  Reduce                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |    -  If the value is greater than 0 but less than 1, it is rounded up to 1.                                                                                                                                                            |
      |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                         |
      |                       |    Removes instances from an AS group when the scaling action is performed.                                                                                                                                                                                                                                                                                                                                                                                                                                           |                                                                                                                                                                                                                                         |
      |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                         |
      |                       | -  Set to                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                         |
      |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                         |
      |                       |    Sets the expected number of instances in an AS group to a specified value.                                                                                                                                                                                                                                                                                                                                                                                                                                         |                                                                                                                                                                                                                                         |
      +-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Cooldown Period       | To prevent an alarm policy from being repeatedly invoked by the same event, you can set a cooldown period.                                                                                                                                                                                                                                                                                                                                                                                                            | 300                                                                                                                                                                                                                                     |
      |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                         |
      |                       | A cooldown period specifies how long any alarm-triggered scaling action will be disallowed after a previous scaling action is complete.                                                                                                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                         |
      |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                         |
      |                       | The cooldown period does not apply to scheduled or periodic scaling actions. However, AS recounts the cooling duration after a scheduled or periodic scaling action is complete.                                                                                                                                                                                                                                                                                                                                      |                                                                                                                                                                                                                                         |
      |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                         |
      |                       | For example, suppose that the cooldown period is set to 300 seconds (5 minutes), and a scheduled policy is specified to trigger a scaling action at 10:32, and a previous scaling action triggered by an alarm policy ends at 10:30. Any alarm-triggered scaling action will then be denied during the cooldown period from 10:30 to 10:35, but the scaling action scheduled for 10:32 will still take place. If the scheduled scaling action ends at 10:36, a new cooldown period starts at 10:36 and ends at 10:41. |                                                                                                                                                                                                                                         |
      |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                         |
      |                       | .. note::                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                         |
      |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                         |
      |                       |    -  If a scaling action is triggered by an AS policy, the cooldown period is whatever configured for that AS policy.                                                                                                                                                                                                                                                                                                                                                                                                |                                                                                                                                                                                                                                         |
      |                       |    -  If a scaling action is triggered by manually changing the expected number of instances or by other actions, the cooldown period is whatever configured for the AS group.                                                                                                                                                                                                                                                                                                                                        |                                                                                                                                                                                                                                         |
      +-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

#. Click **OK**.

   The newly added AS policy is displayed on the **AS Policy** tab. In addition, the AS policy is in **Enabled** state by default.

Creating a Scheduled or Periodic Policy
---------------------------------------

#. Log in to the management console.

2. Click |image2| in the upper left corner to select a region and a project.

3. Under **Computing**, click **Auto Scaling**. In the navigation pane on the left, choose **Instance Scaling**.

4. Locate the row containing the target AS group and click **View AS Policy** in the **Operation** column.

5. On the **AS Policies** page, click **Add AS Policy**.

6. Configure the parameters listed in :ref:`Table 2 <as_03_0102__table8241103213712>`.

   .. _as_03_0102__table8241103213712:

   .. table:: **Table 2** Parameter description

      +-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter             | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Example Value                                                                                                                                                                                                                           |
      +=======================+=======================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+=========================================================================================================================================================================================================================================+
      | Policy Name           | Specifies the name of the AS policy to be created.                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | as-policy-p6g5                                                                                                                                                                                                                          |
      +-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Policy Type           | Select **Scheduled** or **Periodic** for expanding resources at a specified time.                                                                                                                                                                                                                                                                                                                                                                                                                                     | N/A                                                                                                                                                                                                                                     |
      |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                         |
      |                       | If you select **Periodic**, you are required to configure two more parameters:                                                                                                                                                                                                                                                                                                                                                                                                                                        |                                                                                                                                                                                                                                         |
      |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                         |
      |                       | -  Interval                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |                                                                                                                                                                                                                                         |
      |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                         |
      |                       |    -  One day                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |                                                                                                                                                                                                                                         |
      |                       |    -  One week                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |                                                                                                                                                                                                                                         |
      |                       |    -  One month                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                         |
      |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                         |
      |                       | -  Time Range                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |                                                                                                                                                                                                                                         |
      |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                         |
      |                       |    Specifies a time range during which the AS policy can be triggered.                                                                                                                                                                                                                                                                                                                                                                                                                                                |                                                                                                                                                                                                                                         |
      +-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Time Zone             | The default value is **GMT+08:00**.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | GMT+08:00                                                                                                                                                                                                                               |
      |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                         |
      |                       | GMT+08:00 is 8:00 hours ahead of Greenwich Mean Time.                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                                                                         |
      +-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Triggered At          | Specifies a time at which the AS policy is triggered.                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | N/A                                                                                                                                                                                                                                     |
      +-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Scaling Action        | Specifies an action and the number of instances.                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | -  Add 1 instance                                                                                                                                                                                                                       |
      |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                         |
      |                       | The following scaling action options are available:                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | -  Add 10% instances                                                                                                                                                                                                                    |
      |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                         |
      |                       | -  Add                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |    The number of instances to be added is 10% of the current number of instances in the AS group. If the product of the current number of instances and the percentage is not an integer, AS automatically rounds the value up or down: |
      |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                         |
      |                       |    Adds instances to an AS group when the scaling action is performed.                                                                                                                                                                                                                                                                                                                                                                                                                                                |    -  If the value is greater than 1, it is rounded down.                                                                                                                                                                               |
      |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                         |
      |                       | -  Reduce                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |    -  If the value is greater than 0 but less than 1, it is rounded up to 1.                                                                                                                                                            |
      |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                         |
      |                       |    Removes instances from an AS group when the scaling action is performed.                                                                                                                                                                                                                                                                                                                                                                                                                                           |                                                                                                                                                                                                                                         |
      |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                         |
      |                       | -  Set to                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                         |
      |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                         |
      |                       |    Sets the expected number of instances in an AS group to a specified value.                                                                                                                                                                                                                                                                                                                                                                                                                                         |                                                                                                                                                                                                                                         |
      +-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Cooldown Period       | To prevent an alarm policy from being repeatedly invoked by the same event, you can set a cooldown period.                                                                                                                                                                                                                                                                                                                                                                                                            | 300                                                                                                                                                                                                                                     |
      |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                         |
      |                       | Specifies how long any alarm-triggered scaling action will be disallowed after a previous scaling action is complete.                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                                                                         |
      |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                         |
      |                       | The cooldown period does not apply to scheduled or periodic scaling actions. However, AS recounts the cooling duration after a scheduled or periodic scaling action is complete.                                                                                                                                                                                                                                                                                                                                      |                                                                                                                                                                                                                                         |
      |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                         |
      |                       | For example, suppose that the cooldown period is set to 300 seconds (5 minutes), and a scheduled policy is specified to trigger a scaling action at 10:32, and a previous scaling action triggered by an alarm policy ends at 10:30. Any alarm-triggered scaling action will then be denied during the cooldown period from 10:30 to 10:35, but the scaling action scheduled for 10:32 will still take place. If the scheduled scaling action ends at 10:36, a new cooldown period starts at 10:36 and ends at 10:41. |                                                                                                                                                                                                                                         |
      |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                         |
      |                       | .. note::                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                         |
      |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                         |
      |                       |    -  If a scaling action is triggered by an AS policy, the cooldown period is whatever configured for that AS policy.                                                                                                                                                                                                                                                                                                                                                                                                |                                                                                                                                                                                                                                         |
      |                       |    -  If a scaling action is triggered by manually changing the expected number of instances or by other actions, the cooldown period is whatever configured for the AS group.                                                                                                                                                                                                                                                                                                                                        |                                                                                                                                                                                                                                         |
      +-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

7. Click **OK**.

   The newly added AS policy is displayed on the **AS Policy** tab. In addition, the AS policy is in **Enabled** state by default.

.. note::

   If you have created scheduled or periodic AS policies that are invoked at the same time, AS will execute the one created later. This constraint does not apply to alarm-triggered AS policies.

.. |image1| image:: /_static/images/en-us_image_0210485079.png
.. |image2| image:: /_static/images/en-us_image_0210485079.png

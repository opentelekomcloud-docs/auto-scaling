:original_name: as_02_0103.html

.. _as_02_0103:

Creating an AS Configuration from Scratch
=========================================

Scenarios
---------

If you have special requirements on the ECS instances for resource expansion, use a new specifications template to create the AS configuration. In such a case, ECS instances that have the specifications specified in the template will be added to the AS group in scaling actions.

Procedure
---------

#. Log in to the management console.

#. Click |image1| in the upper left corner to select a region and a project.

#. Under **Computing**, click **Auto Scaling**. In the navigation pane on the left, choose **Instance Scaling**.

#. Click **Create AS Configuration**.

#. Set the parameters for the AS configuration. :ref:`Table 1 <as_02_0103__table52838201145822>` lists the AS configuration parameters.

   .. _as_02_0103__table52838201145822:

   .. table:: **Table 1** AS configuration parameters

      +------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+
      | Parameter              | Description                                                                                                                                                                                                                                                                                                                                                                                                           | Example Value                        |
      +========================+=======================================================================================================================================================================================================================================================================================================================================================================================================================+======================================+
      | Region                 | A region is where an AS configuration resides.                                                                                                                                                                                                                                                                                                                                                                        | N/A                                  |
      +------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+
      | Name                   | Specifies the name of the AS configuration to be created.                                                                                                                                                                                                                                                                                                                                                             | ``-``                                |
      +------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+
      | Configuration Template | Select **Create a new specifications template**.                                                                                                                                                                                                                                                                                                                                                                      | Create a new specifications template |
      |                        |                                                                                                                                                                                                                                                                                                                                                                                                                       |                                      |
      |                        | If this option is selected, configure parameters, such as the vCPUs, memory, image, disk, and ECS type, to create a new AS configuration.                                                                                                                                                                                                                                                                             |                                      |
      +------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+
      | Specifications         | The public cloud provides various ECS types for different application scenarios.                                                                                                                                                                                                                                                                                                                                      | Memory-optimized                     |
      |                        |                                                                                                                                                                                                                                                                                                                                                                                                                       |                                      |
      |                        | For more information, see *Elastic Cloud Server User Guide*.                                                                                                                                                                                                                                                                                                                                                          |                                      |
      |                        |                                                                                                                                                                                                                                                                                                                                                                                                                       |                                      |
      |                        | Configure the ECS specifications, including vCPUs, memory, image type, and disk, according to the ECS type.                                                                                                                                                                                                                                                                                                           |                                      |
      +------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+
      | Image                  | -  Public image                                                                                                                                                                                                                                                                                                                                                                                                       | Public image                         |
      |                        |                                                                                                                                                                                                                                                                                                                                                                                                                       |                                      |
      |                        |    A public image is a standard, widely used image. It contains an OS and preinstalled public applications and is available to all users. If a public image does not contain the applications or software you need, you can use the public image to create a cloud server and then deploy required software as needed.                                                                                                |                                      |
      |                        |                                                                                                                                                                                                                                                                                                                                                                                                                       |                                      |
      |                        | -  Private image                                                                                                                                                                                                                                                                                                                                                                                                      |                                      |
      |                        |                                                                                                                                                                                                                                                                                                                                                                                                                       |                                      |
      |                        |    A private image is an image available only to the user who created it. It contains an OS, preinstalled public applications, and the user's private applications. Using a private image to create ECSs frees you from configuring multiple ECSs repeatedly.                                                                                                                                                         |                                      |
      |                        |                                                                                                                                                                                                                                                                                                                                                                                                                       |                                      |
      |                        |    .. note::                                                                                                                                                                                                                                                                                                                                                                                                          |                                      |
      |                        |                                                                                                                                                                                                                                                                                                                                                                                                                       |                                      |
      |                        |       If you select an encrypted image, you must grant key management system (KMS) access rights to EVS. Otherwise, encryption cannot be used. If you have rights granting permission, grant the KMS access rights to EVS. If you do not have the permission, contact the user having the security administrator rights to grant the KMS access rights. For details, see *Identity and Access Management User Guide*. |                                      |
      |                        |                                                                                                                                                                                                                                                                                                                                                                                                                       |                                      |
      |                        |       -  **Encrypted**: indicates that the image has been encrypted.                                                                                                                                                                                                                                                                                                                                                  |                                      |
      |                        |       -  **KMS Key Name**: specifies the name of the key used by the encrypted image. By default, the name is **ims/default**.                                                                                                                                                                                                                                                                                        |                                      |
      |                        |       -  **Xrole Name: EVSAccessKMS**: indicates that EVS has obtained the KMS access rights.                                                                                                                                                                                                                                                                                                                         |                                      |
      |                        |                                                                                                                                                                                                                                                                                                                                                                                                                       |                                      |
      |                        |       For more information about encrypted images, see *Image Management Service User Guide*.                                                                                                                                                                                                                                                                                                                         |                                      |
      |                        |                                                                                                                                                                                                                                                                                                                                                                                                                       |                                      |
      |                        | -  Shared image                                                                                                                                                                                                                                                                                                                                                                                                       |                                      |
      |                        |                                                                                                                                                                                                                                                                                                                                                                                                                       |                                      |
      |                        |    A shared image is a private image shared by another public cloud user.                                                                                                                                                                                                                                                                                                                                             |                                      |
      +------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+
      | License Type           | Specifies a license type for using an OS or software on the public cloud. If the image you selected is free of charge, this parameter is unavailable. If the image you selected is billed, such as an Ubuntu, SUSE, Oracle Linux, or Windows Server Edition image, this parameter is available.                                                                                                                       | Bring your own license (BYOL)        |
      |                        |                                                                                                                                                                                                                                                                                                                                                                                                                       |                                      |
      |                        | -  Use license from the system                                                                                                                                                                                                                                                                                                                                                                                        |                                      |
      |                        |                                                                                                                                                                                                                                                                                                                                                                                                                       |                                      |
      |                        |    Allows you to use the license provided by the public cloud . Obtaining the authorization of such a license is billed.                                                                                                                                                                                                                                                                                              |                                      |
      |                        |                                                                                                                                                                                                                                                                                                                                                                                                                       |                                      |
      |                        | -  Bring your own license (BYOL)                                                                                                                                                                                                                                                                                                                                                                                      |                                      |
      |                        |                                                                                                                                                                                                                                                                                                                                                                                                                       |                                      |
      |                        |    Allows you to use your existing OS license. In such a case, you do not need to apply for a license again.                                                                                                                                                                                                                                                                                                          |                                      |
      |                        |                                                                                                                                                                                                                                                                                                                                                                                                                       |                                      |
      |                        | For more information about the license type, see `Elastic Cloud Server User Guide <https://docs.otc.t-systems.com/en-us/usermanual/ecs/en-us_topic_0046566932.html>`__.                                                                                                                                                                                                                                               |                                      |
      +------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+
      | Disk                   | Includes system and data disks.                                                                                                                                                                                                                                                                                                                                                                                       | **Common I/O** for **System Disk**   |
      |                        |                                                                                                                                                                                                                                                                                                                                                                                                                       |                                      |
      |                        | -  **System Disk**                                                                                                                                                                                                                                                                                                                                                                                                    |                                      |
      |                        |                                                                                                                                                                                                                                                                                                                                                                                                                       |                                      |
      |                        |    **Common I/O**: uses Serial Advanced Technology Attachment (SATA) drives to store data.                                                                                                                                                                                                                                                                                                                            |                                      |
      |                        |                                                                                                                                                                                                                                                                                                                                                                                                                       |                                      |
      |                        |    **High I/O**: uses serial attached SCSI (SAS) drives to store data.                                                                                                                                                                                                                                                                                                                                                |                                      |
      |                        |                                                                                                                                                                                                                                                                                                                                                                                                                       |                                      |
      |                        |    **Ultra-high I/O**: uses solid state disk (SSD) drives to store data.                                                                                                                                                                                                                                                                                                                                              |                                      |
      |                        |                                                                                                                                                                                                                                                                                                                                                                                                                       |                                      |
      |                        |    If the image based on which an ECS is created is encrypted, the system disk of the ECS is automatically encrypted. In addition, the name of the encrypted key is displayed on the page.                                                                                                                                                                                                                            |                                      |
      |                        |                                                                                                                                                                                                                                                                                                                                                                                                                       |                                      |
      |                        | -  **Data Disk**                                                                                                                                                                                                                                                                                                                                                                                                      |                                      |
      |                        |                                                                                                                                                                                                                                                                                                                                                                                                                       |                                      |
      |                        |    You can create multiple data disks for an ECS instance and encrypt them. In addition, you can specify a data disk image for exporting data.                                                                                                                                                                                                                                                                        |                                      |
      |                        |                                                                                                                                                                                                                                                                                                                                                                                                                       |                                      |
      |                        |    When encrypting a data disk, select **Encryption** for it. KMS access rights must be granted to EVS for using the encryption feature. If you have rights granting permission, grant the KMS access rights to EVS. If you do not have the permission, contact the user having the security administrator rights to grant the KMS access rights. For details, see *Identity and Access Management User Guide*.       |                                      |
      |                        |                                                                                                                                                                                                                                                                                                                                                                                                                       |                                      |
      |                        |    -  **Xrole Name: EVSAccessKMS**: indicates that EVS has obtained the KMS access rights.                                                                                                                                                                                                                                                                                                                            |                                      |
      |                        |    -  **KMS Key Name**: specifies the name of the key used by the encrypted data disk. By default, the name is **evs/default**.                                                                                                                                                                                                                                                                                       |                                      |
      |                        |    -  **KMS Key ID**: specifies the ID of the key used by the encrypted data disk.                                                                                                                                                                                                                                                                                                                                    |                                      |
      |                        |                                                                                                                                                                                                                                                                                                                                                                                                                       |                                      |
      |                        |    For more information about EVS disk encryption, see *Elastic Volume Service User Guide*.                                                                                                                                                                                                                                                                                                                           |                                      |
      +------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+
      | Security Group         | Controls ECS access within or between security groups by defining access rules. ECSs added to a security group are protected by the access rules you define.                                                                                                                                                                                                                                                          | ``-``                                |
      +------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+
      | EIP                    | An EIP is a static public IP address bound to an ECS in a VPC. Using the EIP, the ECS provides services externally.                                                                                                                                                                                                                                                                                                   | Automatically assign                 |
      |                        |                                                                                                                                                                                                                                                                                                                                                                                                                       |                                      |
      |                        | The following options are provided:                                                                                                                                                                                                                                                                                                                                                                                   |                                      |
      |                        |                                                                                                                                                                                                                                                                                                                                                                                                                       |                                      |
      |                        | -  **Do not use**: An ECS without an EIP cannot access the Internet. However, it can still be used as a service ECS or deployed in a cluster on a private network.                                                                                                                                                                                                                                                    |                                      |
      |                        | -  **Automatically assign**: An EIP with a dedicated bandwidth is automatically assigned to each ECS. You can set the bandwidth size.                                                                                                                                                                                                                                                                                 |                                      |
      +------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+
      | Key Pair               | A key pair is used for ECS login authentication. If you select this mode, create or import a key pair on the **Key Pair** page.                                                                                                                                                                                                                                                                                       | ``-``                                |
      |                        |                                                                                                                                                                                                                                                                                                                                                                                                                       |                                      |
      |                        | .. note::                                                                                                                                                                                                                                                                                                                                                                                                             |                                      |
      |                        |                                                                                                                                                                                                                                                                                                                                                                                                                       |                                      |
      |                        |    If you use an existing key, make sure that you have saved the key file locally. Without the key, you will not be able to log in to your instance.                                                                                                                                                                                                                                                                  |                                      |
      +------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+
      | Advanced Settings      | This allows you to configure **User Data**.                                                                                                                                                                                                                                                                                                                                                                           | ``-``                                |
      |                        |                                                                                                                                                                                                                                                                                                                                                                                                                       |                                      |
      |                        | You can select **Do not configure** or **Configure now**.                                                                                                                                                                                                                                                                                                                                                             |                                      |
      +------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+
      | User Data              | Enables an ECS to automatically inject user data when the ECS starts for the first time. This configuration is optional. If this function is enabled, the ECS automatically injects user data upon its first startup.                                                                                                                                                                                                 | ``-``                                |
      |                        |                                                                                                                                                                                                                                                                                                                                                                                                                       |                                      |
      |                        | For details, see `Elastic Cloud Server User Guide <https://docs.otc.t-systems.com/usermanual/ecs/en-us_topic_0032380449.html>`__.                                                                                                                                                                                                                                                                                     |                                      |
      |                        |                                                                                                                                                                                                                                                                                                                                                                                                                       |                                      |
      |                        | The following methods are available:                                                                                                                                                                                                                                                                                                                                                                                  |                                      |
      |                        |                                                                                                                                                                                                                                                                                                                                                                                                                       |                                      |
      |                        | -  **As text**: allows you to enter the user data in the text box below.                                                                                                                                                                                                                                                                                                                                              |                                      |
      |                        | -  **As file**: allows you to inject script files or other files when you create an ECS.                                                                                                                                                                                                                                                                                                                              |                                      |
      |                        |                                                                                                                                                                                                                                                                                                                                                                                                                       |                                      |
      |                        |    .. note::                                                                                                                                                                                                                                                                                                                                                                                                          |                                      |
      |                        |                                                                                                                                                                                                                                                                                                                                                                                                                       |                                      |
      |                        |       -  For Linux, if you use password authentication, this function is not supported.                                                                                                                                                                                                                                                                                                                               |                                      |
      |                        |       -  If the selected image does not support user data injection, this function is not supported.                                                                                                                                                                                                                                                                                                                  |                                      |
      +------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+

#. Click **Create Now**.

#. If you want to use the newly created AS configuration, add it to the AS group. For details, see :ref:`Creating an AS Group <en-us_topic_0042018368>` or :ref:`Changing the AS Configuration for an AS Group <as_01_0103>`.

#. (Optional) Enable the AS group.

   If the AS group is in **Disabled** state, enable it. For details, see :ref:`Enabling an AS Group <as_01_0104>`.

.. |image1| image:: /_static/images/en-us_image_0210485079.png

:original_name: as_qs_0005.html

.. _as_qs_0005:

Creating an AS Group Quickly
============================

If you are using AS for the first time, following the wizard-based process is an easy way to create an AS group, AS configuration, and AS policy.

Prerequisites
-------------

-  You have created the required VPCs, subnets, security groups, and load balancers.
-  You have obtained the keys for logging in to the instances added by a scaling action.

Procedure
---------

#. Log in to the management console.

#. Click |image1| in the upper left corner to select a region and a project.

#. Under **Computing**, click **Auto Scaling**. In the navigation pane on the left, choose **Instance Scaling**.

#. Click **Create AS Group**.

#. Set basic information about the AS group, such as **Name**, **Max. Instances**, **Min. Instances**, and **Expected Instances**. :ref:`Table 1 <as_qs_0005__table2153361016143>` lists the parameters.

   .. _as_qs_0005__table2153361016143:

   .. table:: **Table 1** AS group parameters

      +-------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+
      | Parameter               | Description                                                                                                                                                                                                                                                                                                                                                                                         | Example Value         |
      +=========================+=====================================================================================================================================================================================================================================================================================================================================================================================================+=======================+
      | Region                  | A region is where the AS group is deployed.                                                                                                                                                                                                                                                                                                                                                         | N/A                   |
      |                         |                                                                                                                                                                                                                                                                                                                                                                                                     |                       |
      |                         | Resources in different regions cannot communicate with each other over internal networks. For lower network latency and faster access to your resources, select the region nearest to your target users.                                                                                                                                                                                            |                       |
      +-------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+
      | AZ                      | An AZ is a physical location where resources use independent power supply and networks. AZs are physically isolated but interconnected through an internal network.                                                                                                                                                                                                                                 | ``-``                 |
      |                         |                                                                                                                                                                                                                                                                                                                                                                                                     |                       |
      |                         | -  If you require high availability, buy servers in different AZs.                                                                                                                                                                                                                                                                                                                                  |                       |
      |                         | -  If you require low network latency, buy servers in the same AZ.                                                                                                                                                                                                                                                                                                                                  |                       |
      |                         |                                                                                                                                                                                                                                                                                                                                                                                                     |                       |
      |                         | To enhance application availability, the system evenly distributes your instances between AZs if multiple AZs have been selected.                                                                                                                                                                                                                                                                   |                       |
      +-------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+
      | Name                    | Specifies the name of the AS group to be created.                                                                                                                                                                                                                                                                                                                                                   | ``-``                 |
      |                         |                                                                                                                                                                                                                                                                                                                                                                                                     |                       |
      |                         | The name contains 1 to 64 characters and consists of only letters, digits, underscores (_), and hyphens (-).                                                                                                                                                                                                                                                                                        |                       |
      +-------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+
      | Max. Instances          | Specifies the maximum number of ECS instances in an AS group.                                                                                                                                                                                                                                                                                                                                       | 1                     |
      +-------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+
      | Expected Instances      | Specifies the expected number of ECS instances in an AS group.                                                                                                                                                                                                                                                                                                                                      | 0                     |
      |                         |                                                                                                                                                                                                                                                                                                                                                                                                     |                       |
      |                         | After an AS group is created, you can change this value, which will trigger a scaling action.                                                                                                                                                                                                                                                                                                       |                       |
      +-------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+
      | Min. Instances          | Specifies the minimum number of ECS instances in an AS group.                                                                                                                                                                                                                                                                                                                                       | 0                     |
      +-------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+
      | VPC                     | Provides a network for your ECS instances.                                                                                                                                                                                                                                                                                                                                                          | ``-``                 |
      |                         |                                                                                                                                                                                                                                                                                                                                                                                                     |                       |
      |                         | All ECS instances in the AS group are deployed in this VPC.                                                                                                                                                                                                                                                                                                                                         |                       |
      +-------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+
      | Subnet                  | You can select up to five subnets. The AS group automatically binds all NICs to the created ECSs. The first subnet is used by the primary NIC of an ECS instance by default, and other subnets are used by extension NICs of the instance.                                                                                                                                                          | ``-``                 |
      +-------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+
      | Load Balancing          | This parameter is optional. A load balancer automatically distributes traffic across all instances in an AS group to balance their service load. It improves the fault tolerance of your applications and expands application service capabilities.                                                                                                                                                 | ``-``                 |
      |                         |                                                                                                                                                                                                                                                                                                                                                                                                     |                       |
      |                         | .. note::                                                                                                                                                                                                                                                                                                                                                                                           |                       |
      |                         |                                                                                                                                                                                                                                                                                                                                                                                                     |                       |
      |                         |    -  Up to three load balancers can be added to an AS group.                                                                                                                                                                                                                                                                                                                                       |                       |
      |                         |    -  After multiple load balancers are added to an AS group, multiple services can be concurrently listened to, thereby improving service scalability. If **ELB health check** is selected for **Health Check Method**, when any one of the listeners detects that an instance becomes unhealthy, AS will replace the faulty instance with a functional one.                                       |                       |
      |                         |                                                                                                                                                                                                                                                                                                                                                                                                     |                       |
      |                         | If you select **Classic** **load balancer**, configure the following parameters:                                                                                                                                                                                                                                                                                                                    |                       |
      |                         |                                                                                                                                                                                                                                                                                                                                                                                                     |                       |
      |                         | -  **Load Balancer**                                                                                                                                                                                                                                                                                                                                                                                |                       |
      |                         | -  **Listener**                                                                                                                                                                                                                                                                                                                                                                                     |                       |
      |                         |                                                                                                                                                                                                                                                                                                                                                                                                     |                       |
      |                         | If you select **Enhanced load balancer**, configure the following parameters:                                                                                                                                                                                                                                                                                                                       |                       |
      |                         |                                                                                                                                                                                                                                                                                                                                                                                                     |                       |
      |                         | -  **Load Balancer**                                                                                                                                                                                                                                                                                                                                                                                |                       |
      |                         | -  **Backend ECS Group**                                                                                                                                                                                                                                                                                                                                                                            |                       |
      |                         |                                                                                                                                                                                                                                                                                                                                                                                                     |                       |
      |                         | -  **Backend Port**: specifies the port on which a backend ECS listens for traffic.                                                                                                                                                                                                                                                                                                                 |                       |
      |                         |                                                                                                                                                                                                                                                                                                                                                                                                     |                       |
      |                         | -  **Weight**: determines the portion of requests a backend ECS processes compared to other backend ECSs added to the same listener.                                                                                                                                                                                                                                                                |                       |
      |                         |                                                                                                                                                                                                                                                                                                                                                                                                     |                       |
      |                         |    For more information about load balancing, see *Elastic Load Balancing User Guide*.                                                                                                                                                                                                                                                                                                              |                       |
      +-------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+
      | Instance Removal Policy | Controls which instances are first to be removed during scale in. If specified conditions are met, scaling actions are triggered to remove instances by following the removal policy you choose. There are four instance removal policies for you to choose from:                                                                                                                                   | ``-``                 |
      |                         |                                                                                                                                                                                                                                                                                                                                                                                                     |                       |
      |                         | -  **Oldest instance created from oldest AS configuration**: The oldest instance created from the oldest configuration is removed from the AS group first.                                                                                                                                                                                                                                          |                       |
      |                         | -  **Newest instance created from oldest AS configuration**: The newest instance created from the oldest configuration is removed from the AS group first.                                                                                                                                                                                                                                          |                       |
      |                         | -  **Oldest instance**: The oldest instance is removed from the AS group first.                                                                                                                                                                                                                                                                                                                     |                       |
      |                         | -  **Newest instance**: The newest instance is removed from the AS group first.                                                                                                                                                                                                                                                                                                                     |                       |
      |                         |                                                                                                                                                                                                                                                                                                                                                                                                     |                       |
      |                         | .. note::                                                                                                                                                                                                                                                                                                                                                                                           |                       |
      |                         |                                                                                                                                                                                                                                                                                                                                                                                                     |                       |
      |                         |    -  Removing instances will preferentially ensure that the remaining instances are load balanced in AZs.                                                                                                                                                                                                                                                                                          |                       |
      |                         |    -  Manually added ECS instances are the last to be removed. If AS does remove a manually added instance, it only removes the instance from the AS group. It does not delete the instance. If multiple manually added instances must be removed, AS preferentially removes the earliest-added instance first.                                                                                     |                       |
      +-------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+
      | EIP                     | If **EIP** has been selected in the AS configuration for an AS group, an EIP is automatically bound to the ECS instance added to the AS group. If you select **Release**, the EIP bound to an instance is released when the instance is removed from the AS group. Otherwise, the system unbinds the EIP from the instance, but does not release it when the instance is removed from the AS group. | ``-``                 |
      +-------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+
      | Health Check Method     | If an ECS instance fails a health check, AS replaces it with a new one. There are two health check methods:                                                                                                                                                                                                                                                                                         | ``-``                 |
      |                         |                                                                                                                                                                                                                                                                                                                                                                                                     |                       |
      |                         | -  **ECS health check**: checks the ECS instance running status. If an instance is stopped or deleted, it is considered unhealthy. This method is selected by default. Using this method, the AS group periodically checks the running status of each ECS instance. If an instance is unhealthy, AS removes the instance from the AS group.                                                         |                       |
      |                         | -  **ELB health check**: determines ECS running status using a load balancing listener. This health check method is only available if a load balancer is configured for the AS group. An instance is considered to be healthy only when all associated listeners detect it as healthy. If a listener detects that the instance is unhealthy, AS removes the instance from the AS group.             |                       |
      +-------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+
      | Health Check Interval   | Specifies the length of time between health checks. You can set a health check interval, such as 10 seconds, 1 minute, 5 minutes, 15 minutes, 1 hour, and 3 hours based on service requirements.                                                                                                                                                                                                    | 5 minutes             |
      +-------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+
      | Enterprise Project      | Specifies the enterprise project to which the AS group belongs. If an enterprise project is configured for an AS group, ECSs created in this AS group also belong to this enterprise project. If you do not specify an enterprise project, the **default** enterprise project will be used.                                                                                                         | ``-``                 |
      |                         |                                                                                                                                                                                                                                                                                                                                                                                                     |                       |
      |                         | .. note::                                                                                                                                                                                                                                                                                                                                                                                           |                       |
      |                         |                                                                                                                                                                                                                                                                                                                                                                                                     |                       |
      |                         |    -  Value **default** indicates the default enterprise project. Resources that are not allocated to any enterprise projects under your account are displayed in the default enterprise project.                                                                                                                                                                                                   |                       |
      |                         |    -  Enterprise project is an upgraded version of IAM. It allocates and manages resources of different projects.                                                                                                                                                                                                                                                                                   |                       |
      +-------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+
      | Advanced Settings       | Configure notifications and tags.                                                                                                                                                                                                                                                                                                                                                                   | ``-``                 |
      |                         |                                                                                                                                                                                                                                                                                                                                                                                                     |                       |
      |                         | You can select **Do not configure** or **Configure now**.                                                                                                                                                                                                                                                                                                                                           |                       |
      +-------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+
      | Notification Mode       | This parameter is optional. If this parameter is selected, the system will notify you of scaling action results by email after a scaling action is complete.                                                                                                                                                                                                                                        | ``-``                 |
      |                         |                                                                                                                                                                                                                                                                                                                                                                                                     |                       |
      |                         | The notifications will be sent to the email address you specified when you registered yourself on the cloud.                                                                                                                                                                                                                                                                                        |                       |
      +-------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+
      | Tag                     | If you have many resources of the same type, you can use tags to manage your resources. You can identify specified resources quickly using the tags allocated to them.                                                                                                                                                                                                                              | ``-``                 |
      |                         |                                                                                                                                                                                                                                                                                                                                                                                                     |                       |
      |                         | Each tag contains a key and a value. You can specify the key and value for each tag.                                                                                                                                                                                                                                                                                                                |                       |
      |                         |                                                                                                                                                                                                                                                                                                                                                                                                     |                       |
      |                         | -  Key                                                                                                                                                                                                                                                                                                                                                                                              |                       |
      |                         |                                                                                                                                                                                                                                                                                                                                                                                                     |                       |
      |                         |    -  The key must be specified.                                                                                                                                                                                                                                                                                                                                                                    |                       |
      |                         |    -  The key must be unique to the AS group.                                                                                                                                                                                                                                                                                                                                                       |                       |
      |                         |    -  The key can include up to 36 characters. Only digits, letters, underscores (_), and hyphens (-) are allowed.                                                                                                                                                                                                                                                                                  |                       |
      |                         |                                                                                                                                                                                                                                                                                                                                                                                                     |                       |
      |                         | -  Value                                                                                                                                                                                                                                                                                                                                                                                            |                       |
      |                         |                                                                                                                                                                                                                                                                                                                                                                                                     |                       |
      |                         |    -  The value is optional.                                                                                                                                                                                                                                                                                                                                                                        |                       |
      |                         |    -  A key can have only one value.                                                                                                                                                                                                                                                                                                                                                                |                       |
      |                         |    -  The value can include up to 43 characters. Only digits, letters, underscores (_), and hyphens (-) are allowed.                                                                                                                                                                                                                                                                                |                       |
      +-------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+

#. Click **Next**.

#. On the displayed page, you can use an existing AS configuration or create an AS configuration. For details, see :ref:`Creating an AS Configuration from an Existing ECS <as_02_0102>` and :ref:`Creating an AS Configuration from Scratch <as_02_0103>`.

#. Click **Next**.

#. (Optional) Add an AS policy to an AS group.

   On the displayed page, click **Add AS Policy**.

   Configure the required parameters, such as the **Policy Type**, **Scaling Action**, and **Cooldown Period**. For details, see :ref:`Dynamic Scaling <as_04_0101>` and :ref:`Scheduled Scaling <as_04_0102>`.

   .. note::

      -  If a scaling action is triggered by an AS policy, the cooldown period is whatever configured for that AS policy.
      -  If a scaling action is triggered by manually changing the expected number of instances or by other actions, the cooldown period is whatever configured for the AS group.

#. Click **Create Now**.

#. Check the AS group, AS configuration, and AS policy information. Click **Submit**.

#. Confirm the creation result and go back to the **AS Groups** page as prompted.

   After the AS group is created, its status changes to **Enabled**.

.. |image1| image:: /_static/images/en-us_image_0071365800.png
